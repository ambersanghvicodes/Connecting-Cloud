define("HeaderServerProxy",["jquery","Utility"],function(e,t){"use strict";return{GetViewQuoteItemsModel:function(t,n,r){e.getJSON("/api/rd/v1/Cart/GetViewQuoteItemsModel",{pageSize:t,page:n,includeLineItem:!1},r)},ItemActionDeleteReduced:function(e,n,r){t.postJson(t.buildUrl("/api/rd/v1/Cart/ItemActionDeleteReduced",{quoteItem:e,itemId:n}),r)},LogInGuestUser:function(e,n,r){t.postJson(t.buildUrl("/api/rd/v1/core/LogInGuestUser",{username:e,password:n}),r)},CreateNewCart:function(e,n){t.postJson(t.buildUrl("/api/rd/v1/Cart/CreateNew",{refer:e}),n)},GetRecentlyVisitedObjects:function(t){e.getJSON("/api/rd/v1/RecentlyVisitedObjects",t)},ExecuteAction:function(e,n){t.postJson(t.buildUrl("/api/rd/v1/RecentlyVisitedObjects/ExecuteAction",{id:e}),n)},GetSetupLinksVisibility:function(t){e.getJSON("/api/rd/v1/SegregationOfDutiesRD/GetSetupLinksVisibility",t)},NavigateToPage:function(e){window.location.href=e},unlockProduct:function(e){t.postJson("/api/rd/v1/Configurator/UnlockProduct",e)}}}),define("CatalogServerProxy",["jquery","Utility"],function(e,t){"use strict";return{getInitData:function(t){e.ajax({url:"/api/rd/v1/Catalog/GetInitData",success:t})},getData:function(t,n){e.ajax({url:"/api/rd/v1/Catalog/GetData",data:t,success:n})},getProductsCount:function(t,n){e.ajax({url:"/api/rd/v1/Catalog/GetProductsCount",data:t,success:n})},getReplacementProductId:function(t,n){e.ajax({url:"/api/rd/v1/Catalog/GetReplaceProductId",method:"GET",data:{orginalProductId:t},success:n})},getQuickAddProductsAndFavorites:function(t,n){e.ajax({url:"/api/rd/v1/Catalog/GetQuickAdd",method:"GET",data:{search:t},success:n,global:!1})},reset:function(){e.ajax({url:"/api/rd/v1/Catalog/Reset",method:"POST",headers:{"X-CSRF-Token":csrfToken}})},activateAbs:function(e,t){t||(t=0),window.location.href=this.createConfigureUrl(e,t)},clearAbs:function(t,n){e.ajax({url:"/api/rd/v1/Catalog/clearAbs",method:"POST",data:t,headers:{"X-CSRF-Token":csrfToken},success:n})},addToQuote:function(e,n,r){t.postJson(t.buildUrl("/api/rd/v1/Catalog/AddToQuote",{productId:e,quantity:n}),r)},addToQuoteWithSection:function(e,n,r,i){t.postJson(t.buildUrl("/api/rd/v1/Catalog/AddToQuote",{productId:e,quantity:n,section:r}),i)},createConfigureUrl:function(e,n,r){var i={pid:e,cid:n};return r&&(i.section=r),t.buildUrl("/Configurator.aspx",i)},crateViewDetailsUrl:function(e,n){return n?t.buildUrl("/ProductDetails",{ProductId:e,section:n}):t.buildUrl("/ProductDetails",{ProductId:e})},crateViewDetailsNoMasterUrl:function(e){return t.buildUrl("/Catalogue/CompareCatalogueNoMasterPage.aspx",{productId:e})},createGetSearchSuggestionsUrl:function(e){var n=t.buildUrl("/api/rd/v1/Catalog/GetSearchSuggestions",{c:e});return n+="&query=%QUERY",n},navigateToFavoritesPage:function(e){window.location.href=t.buildUrl("/Favorites/Favorites.aspx",{productId:e})},deleteFavoriteFromCatalog:function(e,n){t.postJson(t.buildUrl("/api/rd/v1/Favorites/DeleteFavorite",{favoriteId:e}),n)},saveFavoriteFromCatalog:function(e,n,r,i,s,o){t.postJson(t.buildUrl("/api/rd/v1/Favorites/SaveFavoriteFromCatalog",{productId:e,name:n,description:r,isSharedWithCompanyUsers:i,isSharedWithAllUsers:s}),o)},createSearchUrl:function(e){return t.buildUrl("/Catalog",{search:e})},quickConfig:function(e,n){t.postJson(t.buildUrl("/api/rd/v1/Catalog/QuickConfig",{catalogCode:e}),n)},getSBRatePlanByProduct:function(t,n){e.getJSON("/api/rd/v1/Catalog/GetRatePlanForProductAndMarket",{productId:t},n)}}}),define("Common",["jquery","mediator-js","Utility","CatalogServerProxy","Toastr"],function(e,t,n,r,i){"use strict";var s,o,u,a,f;return s=function(e){return"../Debug/"+e+"?rrr="+Math.random()},o=function(e,t){return"../../Admin/"+e+"?pfield="+t+"&trigger=no&fieldName=Formula&ConditionField=NoCondition"},u=function(e,n){var s;s=function(e){e.Ok||i.error(e.Message,self.errorOnAddingToCart),e.RedirectionUrl?window.location.href=e.RedirectionUrl:e.Ok&&(i.success(e.Message),t.publish("CartSummary.changeNoMainItems",e.MainItemsNumber))},r.addToQuote(e,n,s)},a=function(e,t,n,i){r.addToQuoteWithSection(e,t,n,i)},f=function(e,t){require(["ProductDetailsModel"],function(r){n.activateModalFromTemplate(new r(e,t),"ProductDetailsModal")})},{getDebuggerUrl:s,getSyntaxCheckerUrl:o,viewDetails:f,addToQuote:u,addToQuoteWithSection:a}}),define("HeaderModel",["knockout","mediator-js","HeaderServerProxy","Utility","Common"],function(e,t,n,r,i){"use strict";return function(){function g(e){e&&(f.setupLinksVisibility.isDevelopConsoleLinkVisible(e.IsDevelopConsoleLinkVisible),f.setupLinksVisibility.isEventLogLinkVisible(e.IsEventLogLinkVisible),f.setupLinksVisibility.isScriptWorkbenchLinkVisible(e.IsScriptWorkbenchLinkVisible))}var s,o,u,a,f=this,l,c,h,p,d;o=function(e){var t=this;t.id=e.Id,t.name=e.ObjectName,t.productId=e.ProductId,t.iconType=e.IconType},s=function(e){r.rebuildObservableArray(f.rvos,e,o),f.isRvoLoaded(!0)},o.prototype.executeAction=function(){var e=this.productId;n.ExecuteAction(this.id,function(t){t.indexOf("ViewDetailsNew.aspx")>-1?u(e):n.NavigateToPage(t)})},u=function(e){i.viewDetails(e)},p=function(){n.GetRecentlyVisitedObjects(s)},a=function(){this.isDevelopConsoleLinkVisible=e.observable(!1),this.isEventLogLinkVisible=e.observable(!1),this.isScriptWorkbenchLinkVisible=e.observable(!1)},f.setupLinksVisibility=new a,f.rvos=e.observableArray(),f.isRvoLoaded=e.observable(!1),f.iconClicked=e.observable(!1),f.isSideMenuExpanded=e.observable(!1),f.areQuoteMenuItemsRolledUp=e.observable(!1),f.areSetupMenuItemsRolledUp=e.observable(!1),f.userMenuIconClicked=e.observable(!1),f.currentCartMenuIconClicked=e.observable(!1),f.recentlyViewedMenuIconClicked=e.observable(!1),f.isInitialized=e.observable(!1),f.getRvoData=function(){f.isRvoLoaded()||p()},f.getUserInitials=function(e){var t=e.split(" "),n="";for(var r=0;r<t.length;r++){var i=t[r];i&&(n+=i[0].trim())}return n.toUpperCase()},f.toggleSideMenu=function(){var e=$("#sideMenuContainer"),t=$(".slide-out-section"),n=$(".slide-out-section li"),r=$(".dropdown-toggle.sap-icon"),i=500;e&&t&&n&&r&&(f.isSideMenuExpanded()?(e.removeClass("side-menu-toggled-size"),n.addClass("quick-fade-out"),setTimeout(function(){f.isSideMenuExpanded(!f.isSideMenuExpanded()),e.removeClass("overflow-hidden"),e.removeClass("side-menu-toggled"),r.css("position","relative"),t.addClass("dropdown-menu"),t.addClass("slide-in-from-left"),n.removeClass("quick-fade-out")},i)):(e.addClass("overflow-hidden"),e.addClass("side-menu-toggled"),e.addClass("side-menu-toggled-size"),f.isSideMenuExpanded(!f.isSideMenuExpanded()),r.css("position","absolute"),t.removeClass("dropdown-menu"),t.removeClass("slide-in-from-left")))},f.toggleQuoteMenuItems=function(){f.areQuoteMenuItemsRolledUp(!f.areQuoteMenuItemsRolledUp())},f.toggleSetupMenuItems=function(){f.areSetupMenuItemsRolledUp(!f.areSetupMenuItemsRolledUp())},f.toggleUserMenuIcon=function(){f.userMenuIconClicked(!f.userMenuIconClicked())},f.toggleCurrentCartMenuIcon=function(){f.currentCartMenuIconClicked(!f.currentCartMenuIconClicked())},f.toggleRecentlyViewedMenuIcon=function(){f.recentlyViewedMenuIconClicked(!f.recentlyViewedMenuIconClicked())},f.getRVOIcon=function(e){switch(e){case"roQuote":return"&#xe12a;";case"roCategory":return"&#xe08e;";case"roDocument":return"&#xe1b4;";case"roProduct":return"&#xe011;";default:return""}},f.getRVOLabel=function(e){switch(e){case"roQuote":return f.recentlyViewedItemsMenuQuote;case"roCategory":return f.recentlyViewedItemsMenuCategory;case"roDocument":return f.recentlyViewedItemsMenuDocument;case"roProduct":return f.recentlyViewedItemsMenuProduct;default:return""}},f.turnOffMenus=function(){f.userMenuIconClicked(!1),f.currentCartMenuIconClicked(!1),f.recentlyViewedMenuIconClicked(!1)},f.toggleIcon=function(){f.iconClicked(!f.iconClicked())},f.turnOffIcon=function(){f.iconClicked(!1)},l=function(t){var n=[];f.mainItemsNo(t.MainItemsNo),e.utils.arrayForEach(t.QuoteItems,function(e){var t={Id:e.Id,cartItem:e.CartItem,rolledUpCartItem:e.RolledUpCartItem,quantity:e.Quantity,productName:e.ProductName,partNumber:e.PartNumber,price:e.Price,productTypeName:e.ProductTypeName,isMainItem:e.IsMainItem,isCalculated:r.useNewQuoteEngine||e.IsCalculated,productImage:e.ProductImage,canDeleteItem:e.CanDeleteItem};n.push(t)}),e.utils.arrayPushAll(f.viewQuoteItems,n)};var v=10,m=1;c=function(){n.GetViewQuoteItemsModel(v,m,function(e){l(e),f.isRefreshed()||(t.publish("CartSummary.itemsRefreshed"),f.isRefreshed(!0))})},f.loadMore=function(){m++,c()},h=function(){f.isQuoteEnvironmentExists(f.mainItemsNo()!==-1)},f.mainItemsNo=e.observable(),f.isRefreshed=e.observable(!1),f.isQuoteEnvironmentExists=e.observable(!1),f.viewQuoteItems=e.observableArray(),f.itemActionDeleteReduced=function(e){e.canDeleteItem&&(e.canDeleteItem=!1,n.ItemActionDeleteReduced(e.cartItem,e.Id,function(e){m=1,f.isRefreshed(!1),f.viewQuoteItems([]),c()}))},f.viewQuote=function(){r.useNewQuoteEngine?n.unlockProduct(function(){window.location.href="/quotation/Cart.aspx"}):window.location.href="/quotation/Cart.aspx"},f.getViewQuoteItemsModel=function(){window.location.toString().indexOf("Cart.aspx")===-1&&window.location.toString().indexOf("OrderSummary.aspx")===-1&&window.location.toString().indexOf("CreditCard.aspx")===-1&&(f.isRefreshed()||(m=1,c()))},f.guestUserLogin=function(){var t={username:e.observable(""),password:e.observable(""),canClose:!0,submit:function(){n.LogInGuestUser(t.username(),t.password(),function(){window.location.reload()})}};r.activateModalFromTemplate(t,"GuestUserLoginTemplate")},f.createNewCart=function(){n.CreateNewCart("Top",r.handleRedirectionResult)},f.getSetupLinkVisibility=function(){n.GetSetupLinksVisibility(g)},$("#recentlyVisitedMenu").on("shown.bs.dropdown",function(){var e=300;setTimeout(function(){r.makeDropdownAccessible("#recentlyVisitedDropdown","#recentlyVisitedMenuDropdownTrigger")},e)}),$("#userMenu").on("shown.bs.dropdown",function(){var e=300;setTimeout(function(){r.makeDropdownAccessible("#userMenuDropdownContainer","#userMenuDropdownTrigger")},e)}),$("#cartSummaryMenu").on("shown.bs.dropdown",function(){var e=300;setTimeout(function(){r.makeDropdownAccessible("#currentQuoteDropdown","#cartSummaryMenuDropdownTrigger")},e)}),$("#setupMenu").on("shown.bs.dropdown",function(){var e=400;setTimeout(function(){r.makeDropdownAccessible("#setupMenuDropdownContainer","#setupMenuDropdownTrigger")},e)}),t.subscribe("CartSummary.changeNoMainItems",function(e){f.viewQuoteItems([]),f.mainItemsNo(e),h(),f.isRefreshed(!1)}),t.subscribe("CartSummary.refresh",function(){c(),h()}),f.isSideMenuExpanded.subscribe(function(){f.isSideMenuExpanded()&&$("#sideMenuContainer .side-menu-main-icon:first-child a:first-child").focus()}),t.publish("API:modelCreated",{model:f,modelName:"header"})}}),define("HeaderApp",["jquery","knockout","HeaderModel","mediator-js","PerfectScrollbar","CoreApp"],function(e,t,n,r,i){"use strict";return{init:function(s,o){var u=new n,a;s=s=="true",u.isQuoteEnvironmentExists(s),u.mainItemsNo(parseInt(o)),u.getSetupLinkVisibility(),e(function(){t.applyBindings(u,document.getElementById("headerContainer")),document.getElementById("topMenuC4C")&&t.applyBindings(u,document.getElementById("topMenuC4C")),document.getElementById("sideMenuContainer")&&t.applyBindings(u,document.getElementById("sideMenuContainer")),e("#CartPreviewContainer").length&&(a=new i("#CartPreviewContainer",{suppressScrollX:!0})),e("#rvoContainer").length&&new i("#rvoContainer",{suppressScrollX:!0})}),r.subscribe("CartSummary.itemsRefreshed",function(){e("#CartPreviewContainer").scrollTop(0),e("#CartPreviewContainer").length&&a.update()}),u.isInitialized(!0)}}});